(function(a,h,g){function I(){function p(d,b,t,k){this.id=d;this.title=t;this.total_images=b;this.current_image=0;this.image_loaded=[];this.images=[];this.image_links=[];this.image_titles=[];this.thumbs_loaded=!1;this.thumb_strip=a("<div></div>");this.thumb_loaded=[];this.thumbs_src=[];var f=[],e=this;k.each(function(b,k){a(this).attr({"data-albumize-image-id":b,"data-albumize-album-id":d});e.image_links.push(a(this).attr("href"));var c=a(this).attr("title");void 0==t&&(c="");e.image_titles.push(c);
c=a(this).children("img");e.thumbs_src.push(c.attr("src"));"albumize-cover"==c.attr("class")&&f.push(c.attr("src"))});for(k=0;k<b;k++)this.image_loaded[k]=!1;var c=a("<div></div>").addClass("albumize-album-info").attr("data-albumize-album-id",d);k=a("<div></div>").addClass("albumize-album-cover-info");var l=a("<img></img>").attr({"class":"albumize-album-cover-img",src:f[0]}),s=a("<div></div>").addClass("albumize-cover-title").text(t),m=1<b?"images":"image";b=a("<div></div>").addClass("albumize-cover-count").text(b+
" "+m);k.append(s,b);c.append(k);l.load(function(){c.append(l)});K.append(c)}var v=a("#albumize-pane"),B=a("#albumize-olay"),q=a("#albumize-album-overlay"),E=a("#albumize-album-window");a("#albumize-album-window-close");var F=a("#albumize-album-list-button"),b=a("#albumize-i-window"),n=a("#albumize-loading"),w=a("#albumize-loading-error"),H=a("#albumize-album-title-pane"),l=a("#albumize-album-name"),L=a("#albumize-image-title"),c=a("#albumize-prev"),G=a("#albumize-next"),K=a("#albumize-album-pane-body"),
r=a("#albumize-t-body"),m=a(h).height(),u=a(h).width(),s=a(g).height(),A=a(g).width(),C=100*(m/s)+"%",D=100*(u/A)+"%",x=doc.scrollTop(),y=doc.scrollLeft();this.fresh_start=!0;this.current_album=0;var z=[];p.prototype=new function(){this.handle_nav=function(a){G.removeClass("albumize-inactive");c.removeClass("albumize-inactive");if(a==this.total_images-1||0==a)a==this.total_images-1&&G.addClass("albumize-inactive"),0==a&&c.addClass("albumize-inactive"),a==this.total_images-1&&0==a&&(G.addClass("albumize-inactive"),
c.addClass("albumize-inactive"))};this.prev=function(){if(0<this.current_image){var a=parseInt(this.current_image)-1;this.show_image(a,this.image_links[a])}};this.next=function(){if(this.current_image<this.total_images-1){var a=parseInt(this.current_image)+1;this.show_image(a,this.image_links[a])}};this.get_image_link=function(a){return this.image_links[a]};this.show_image=function(d,c){m=a(h).height();u=a(h).width();s=a(g).height();A=a(g).width();C=100*(m/s)+"%";D=100*(u/A)+"%";if(this.image_loaded[d])this.current_image=
d,this.handle_nav(d),b.hide().html(this.images[d]).fadeIn("fast");else{n.show();q.show();var t=this,k,f,e=new Image;e.src=c;e.onerror=function(){b.html("");q.stop().show();w.html('Error loading image . . . <span id = "albumize-error-dismiss">Dismiss</span>').show();n.show();t.current_image=d;t.handle_nav(d)};e.onload=function(){k=500>this.width?this.width:682;f=500>f?this.height:542;var c=100*(k/682),e=100*(f/542),l=(100-e)/2,s=(100-c)/2,m=a(this);m.css({width:c+"%",height:e+"%",position:"absolute",
top:l+"%",left:s+"%"});t.images[d]=a(this);t.image_loaded[d]=!0;t.current_image=d;t.handle_nav(d);w.is(":visible")||(w.hide(),n.hide(),q.hide());b.hide().html(m).fadeIn("fast");x=doc.scrollTop();y=doc.scrollLeft();B.css({width:D,height:C}).fadeIn("slow");v.css({top:x+"px",left:y+"px"}).slideDown("slow")}}L.text(this.image_titles[d])};this.show=function(d){""!=this.title?(l.text(this.title),H.show()):H.hide();if(this.thumbs_loaded)r.html(this.thumb_strip),void 0==d?(this.show_image(0,this.image_links[0]),
E.removeClass("in").fadeOut(),n.hide(),q.fadeOut()):(x=doc.scrollTop(),y=doc.scrollLeft(),B.css({width:D,height:C}).fadeIn("slow"),v.css({top:x+"px",left:y+"px"}).slideDown("slow"),this.show_image(d,this.image_links[d]));else{q.fadeIn();n.show();E.removeClass("in").fadeOut();for(var c=0,b=0,k=[],f=this,e=0;e<this.total_images;e++)k[e]=new Image,k[e].src=this.thumbs_src[e],k[e].setAttribute("data-albumize-album-id",this.id),k[e].setAttribute("data-albumize-image-id",e),k[e].onload=function(){this.className=
"albumize-thumb";f.thumb_strip.append(this);++c==f.total_images&&(f.thumb_strip=f.thumb_strip.html(),r.html(f.thumb_strip),0<b&&b!=f.total_images?(w.html('Error loading some thumbnails . . . <span id = "albumize-error-dismiss">Dismiss</span>').fadeIn(),q.delay("7000").fadeOut(function(){n.hide();w.hide();f.thumbs_loaded=!0})):b==f.total_images?(w.html('Error loading images . . . <span id = "albumize-error-dismiss">Dismiss</span>').fadeIn(),f.thumbs_loaded=!1,f.thumb_strip=0,f.thumb_strip=a("<div></div>")):
0==b&&(f.thumbs_loaded=!0,n.hide(),q.fadeOut()),void 0==d?f.show_image(0,f.image_links[0]):(x=doc.scrollTop(),y=doc.scrollLeft(),B.css({width:D,height:C}).fadeIn("slow"),v.css({top:x+"px",left:y+"px"}).slideDown("slow"),f.show_image(d,f.image_links[d])))},k[e].onerror=function(){b++;this.style.display="none";this.onload()}}}};this.init=function(b,c){c.each(function(b,c){a(this).attr("data-albumize-album-id",b);var d=a(this).attr("title");void 0==d&&(d="");var e=a(this).children("a");z[b]=new p(b,
e.length,d,e)})};this.show=function(a,b){this.fresh_start=!1;this.current_album=a;z[a].get_image_link(b);z[a].show(b)};this.show_album=function(a){this.fresh_start=!1;this.current_album=a;z[a].show()};this.show_image_from_thumb=function(a,b){this.fresh_start=!1;var c=z[a].get_image_link(b);z[a].show_image(b,c)};this.show_albums=function(){m=a(h).height();u=a(h).width();s=a(g).height();A=a(g).width();C=100*(m/s)+"%";D=100*(u/A)+"%";x=doc.scrollTop();y=doc.scrollLeft();B.css({width:D,height:C}).fadeIn("slow");
v.css({top:x+"px",left:y+"px"}).slideDown("slow");F.click()};this.show_next=function(){z[this.current_album].next()};this.show_prev=function(){z[this.current_album].prev()}}win=a(g);doc=a(h);var p;a(h).ready(function(){var J=a(h).height(),v=a(h).width(),B=a(g).height(),q=a(g).width(),E=100*(J/B)+"%",F=100*(v/q)+"%";a(g).scrollTop();a(g).scrollLeft();var b=a(h.body);b.width();b.height();var n=a(".albumize"),w=n.length;(function(){var p=a("<div></div>").addClass("albumize-overlay").attr("id","albumize-olay").css({width:F,
height:E}),l=a("<div></div>").addClass("albumize-pane").attr("id","albumize-pane"),h=a('<div><div id = "albumize-loading-error"></div><div id = "albumize-loading"></div></div>').addClass("albumize-album-overlay").attr("id","albumize-album-overlay"),c=a("<div></div>").addClass("albumize-header").attr("id","albumize-header"),g=a("<button>&times;</button>").addClass("albumize-close").attr("id","albumize-close"),n=a('<div><span id = "albumize-album-label">Album</span><span id = "albumize-album-name"></span></div>').attr("id",
"albumize-album-title-pane"),r=a("<div></div>").attr("id","albumize-image-title");g.appendTo(c);n.appendTo(c);r.appendTo(c);var g=a("<div></div>").addClass("albumize-control-pane").attr("id","albumize-control-pane"),n=a("<div></div>").addClass("albumize-prev").attr("id","albumize-prev"),r=a("<div></div>").addClass("albumize-album-list").attr("id","albumize-album-list-button"),m=a("<div></div>").addClass("albumize-next").attr("id","albumize-next"),u=a('<div><div class = "albumize-modal-header" id = "albumize-album-pane-header"><button class = "albumize-albums-close" id = "albumize-album-window-close">&times;</button><h3>Albums</h3></div><div class = "albumize-modal-body" id = "albumize-album-pane-body"></div><div class = "albumize-modal-footer" id = "albumize-album-pane-footer">click to view album</div></div>').addClass("albumize-album-window albumize-modal fade").attr("id",
"albumize-album-window"),s=a('<div><div class = "albumize-t-slider" id = "albumize-t-slider"></div><div class = "albumize-t-pane" id = "albumize-t-pane"><div class = "albumize-t-header" id = "albumize-t-header"></div><div class = "albumize-t-body" id = "albumize-t-body"></div></div></div>').addClass("albumize-t-window").attr("id","albumize-t-window"),A=a("<div></div>").addClass("albumize-i-window").attr("id","albumize-i-window");g.append(n,r,m);l.append(c);l.append(A);l.append(g);l.append(s);p.appendTo(b);
l.appendTo(b);l.append(h);l.append(u)})();(function(){p=new I;a.albumize=function(){0==arguments.length&&p.show_albums()};p.init(w,n);var g=a("#albumize-olay"),l=a("#albumize-pane"),h=a("#albumize-album-window"),c=a("#albumize-album-overlay");a("#albumize-album-window-close");var q=a("#albumize-t-slider"),v=a("#albumize-t-window"),r=a("#albumize-loading"),m=a("#albumize-loading-error"),u=!0;b.on("click","#albumize-olay",function(){h.hide();r.hide();m.hide();c.hide();l.slideUp("fast");g.slideUp("fast")});
b.on("click","#albumize-pane #albumize-close",function(){h.hide();r.hide();m.hide();c.hide();l.slideUp("fast");g.fadeOut("fast")});b.on("click","#albumize-album-list-button",function(){h.fadeIn().addClass("in");c.fadeIn()});b.on("click","#albumize-album-window-close",function(){p.fresh_start?(r.hide(),m.hide(),l.hide(),h.removeClass("in").fadeOut(),c.fadeOut("fast"),g.fadeOut("fast")):(h.removeClass("in").fadeOut(),c.fadeOut())});b.on("click","#albumize-t-slider",function(){(u=!u)?q.removeClass("out"):
q.addClass("out");v.toggleClass("t-hide")});b.on("click",".albumize a",function(){var b=parseInt(a(this).attr("data-albumize-album-id")),c=parseInt(a(this).attr("data-albumize-image-id"));p.show(b,c);return!1});b.on("click",".albumize-album-info",function(){var b=parseInt(a(this).attr("data-albumize-album-id"));p.show_album(b)});b.on("click","#albumize-error-dismiss",function(){c.stop().fadeOut();r.hide();m.hide()});b.on("click",".albumize-thumb",function(){var b=parseInt(a(this).attr("data-albumize-album-id")),
c=parseInt(a(this).attr("data-albumize-image-id"));p.show_image_from_thumb(b,c)});b.on("click","#albumize-prev",function(){p.show_prev()});b.on("click","#albumize-next",function(){p.show_next()})})()})})(jQuery,document,window);